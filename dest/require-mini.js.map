{"version":3,"sources":["require-mini.js"],"names":["global","safeGet","value","split","reduce","obj","prop","isFunction","fn","loadDep","name","path","config","shim","_require","deps","loadScript","then","exportsFn","init","window","exports","result","deferred","promise","Promise","resolve","reject","context","cleanup","pendingModule","lastTask","invokeLater","catch","Error","el","require","load","toUrl","onerror","onload","NativePromise","nativePromiseSupported","r","asyncTimer","PENDING","SEALED","FULFILLED","REJECTED","NOOP","asyncSetTimer","setImmediate","setTimeout","asyncQueue","asyncFlush","i","length","asyncCall","callback","arg","push","invokeCallback","subscriber","owner","settled","state_","data_","e","handleThenable","resolved","TypeError","call","val","fulfill","reason","publishFulfillment","publishRejection","publish","then_","forEach","resolver","this","rejectPromise","invokeResolver","prototype","constructor","undefined","onFulfillment","onRejection","fulfilled","rejected","all","promises","Array","isArray","results","remaining","index","race","Function","commentRegExp","cjsRequireRegExp","factory","errback","currentModule","slice","map","dependency","indexOf","concat","join","plugin","newPath","locals","modules","substr","localRequire","apply","arguments","Object","keys","key","error","fromText","text","previousModule","predefines","instances","onError","moduleName","module","id","appendJS","bundle","bundles","filter","paths","test","baseUrl","urlArgs","define","wrapped","toString","replace","match","dep","args","resetContext","options","deepmerge","target","src","array","dst","url","document","createElement","async","getElementsByTagName","appendChild","specified","hasOwnProperty","console","amd","requirejs"],"mappings":"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","file":"require-mini.js","sourcesContent":["(function(global) {\n    (function(global){\n    \n    //\n    // Check for native Promise and it has correct interface\n    //\n    \n    var NativePromise = global['Promise'];\n    var nativePromiseSupported =\n      NativePromise &&\n      // Some of these methods are missing from\n      // Firefox/Chrome experimental implementations\n      'resolve' in NativePromise &&\n      'reject' in NativePromise &&\n      'all' in NativePromise &&\n      'race' in NativePromise &&\n      // Older version of the spec had a resolver object\n      // as the arg rather than a function\n      (function(){\n        var resolve;\n        new NativePromise(function(r){ resolve = r; });\n        return typeof resolve === 'function';\n      })();\n    \n    \n    //\n    // export if necessary\n    //\n    \n    if (typeof exports !== 'undefined' && exports)\n    {\n      // node.js\n      exports.Promise = nativePromiseSupported ? NativePromise : Promise;\n    }\n    else\n    {\n      // in browser add to global\n      if (!nativePromiseSupported)\n        global['Promise'] = Promise;\n    }\n    \n    \n    //\n    // Polyfill\n    //\n    \n    var PENDING = 'pending';\n    var SEALED = 'sealed';\n    var FULFILLED = 'fulfilled';\n    var REJECTED = 'rejected';\n    var NOOP = function(){};\n    \n    // async calls\n    var asyncSetTimer = typeof setImmediate !== 'undefined' ? setImmediate : setTimeout;\n    var asyncQueue = [];\n    var asyncTimer;\n    \n    function asyncFlush(){\n      // run promise callbacks\n      for (var i = 0; i < asyncQueue.length; i++)\n        asyncQueue[i][0](asyncQueue[i][1]);\n    \n      // reset async asyncQueue\n      asyncQueue = [];\n      asyncTimer = false;\n    }\n    \n    function asyncCall(callback, arg){\n      asyncQueue.push([callback, arg]);\n    \n      if (!asyncTimer)\n      {\n        asyncTimer = true;\n        asyncSetTimer(asyncFlush, 0);\n      }\n    }\n    \n    \n    function invokeResolver(resolver, promise) {\n      function resolvePromise(value) {\n        resolve(promise, value);\n      }\n    \n      function rejectPromise(reason) {\n        reject(promise, reason);\n      }\n    \n      try {\n        resolver(resolvePromise, rejectPromise);\n      } catch(e) {\n        rejectPromise(e);\n      }\n    }\n    \n    function invokeCallback(subscriber){\n      var owner = subscriber.owner;\n      var settled = owner.state_;\n      var value = owner.data_;  \n      var callback = subscriber[settled];\n      var promise = subscriber.then;\n    \n      if (typeof callback === 'function')\n      {\n        settled = FULFILLED;\n        try {\n          value = callback(value);\n        } catch(e) {\n          reject(promise, e);\n        }\n      }\n    \n      if (!handleThenable(promise, value))\n      {\n        if (settled === FULFILLED)\n          resolve(promise, value);\n    \n        if (settled === REJECTED)\n          reject(promise, value);\n      }\n    }\n    \n    function handleThenable(promise, value) {\n      var resolved;\n    \n      try {\n        if (promise === value)\n          throw new TypeError('A promises callback cannot return that same promise.');\n    \n        if (value && (typeof value === 'function' || typeof value === 'object'))\n        {\n          var then = value.then;  // then should be retrived only once\n    \n          if (typeof then === 'function')\n          {\n            then.call(value, function(val){\n              if (!resolved)\n              {\n                resolved = true;\n    \n                if (value !== val)\n                  resolve(promise, val);\n                else\n                  fulfill(promise, val);\n              }\n            }, function(reason){\n              if (!resolved)\n              {\n                resolved = true;\n    \n                reject(promise, reason);\n              }\n            });\n    \n            return true;\n          }\n        }\n      } catch (e) {\n        if (!resolved)\n          reject(promise, e);\n    \n        return true;\n      }\n    \n      return false;\n    }\n    \n    function resolve(promise, value){\n      if (promise === value || !handleThenable(promise, value))\n        fulfill(promise, value);\n    }\n    \n    function fulfill(promise, value){\n      if (promise.state_ === PENDING)\n      {\n        promise.state_ = SEALED;\n        promise.data_ = value;\n    \n        asyncCall(publishFulfillment, promise);\n      }\n    }\n    \n    function reject(promise, reason){\n      if (promise.state_ === PENDING)\n      {\n        promise.state_ = SEALED;\n        promise.data_ = reason;\n    \n        asyncCall(publishRejection, promise);\n      }\n    }\n    \n    function publish(promise) {\n      promise.then_ = promise.then_.forEach(invokeCallback);\n    }\n    \n    function publishFulfillment(promise){\n      promise.state_ = FULFILLED;\n      publish(promise);\n    }\n    \n    function publishRejection(promise){\n      promise.state_ = REJECTED;\n      publish(promise);\n    }\n    \n    /**\n    * @class\n    */\n    function Promise(resolver){\n      if (typeof resolver !== 'function')\n        throw new TypeError('Promise constructor takes a function argument');\n    \n      if (this instanceof Promise === false)\n        throw new TypeError('Failed to construct \\'Promise\\': Please use the \\'new\\' operator, this object constructor cannot be called as a function.');\n    \n      this.then_ = [];\n    \n      invokeResolver(resolver, this);\n    }\n    \n    Promise.prototype = {\n      constructor: Promise,\n    \n      state_: PENDING,\n      then_: null,\n      data_: undefined,\n    \n      then: function(onFulfillment, onRejection){\n        var subscriber = {\n          owner: this,\n          then: new this.constructor(NOOP),\n          fulfilled: onFulfillment,\n          rejected: onRejection\n        };\n    \n        if (this.state_ === FULFILLED || this.state_ === REJECTED)\n        {\n          // already resolved, call callback async\n          asyncCall(invokeCallback, subscriber);\n        }\n        else\n        {\n          // subscribe\n          this.then_.push(subscriber);\n        }\n    \n        return subscriber.then;\n      },\n    \n      'catch': function(onRejection) {\n        return this.then(null, onRejection);\n      }\n    };\n    \n    Promise.all = function(promises){\n      var Class = this;\n    \n      if (!Array.isArray(promises))\n        throw new TypeError('You must pass an array to Promise.all().');\n    \n      return new Class(function(resolve, reject){\n        var results = [];\n        var remaining = 0;\n    \n        function resolver(index){\n          remaining++;\n          return function(value){\n            results[index] = value;\n            if (!--remaining)\n              resolve(results);\n          };\n        }\n    \n        for (var i = 0, promise; i < promises.length; i++)\n        {\n          promise = promises[i];\n    \n          if (promise && typeof promise.then === 'function')\n            promise.then(resolver(i), reject);\n          else\n            results[i] = promise;\n        }\n    \n        if (!remaining)\n          resolve(results);\n      });\n    };\n    \n    Promise.race = function(promises){\n      var Class = this;\n    \n      if (!Array.isArray(promises))\n        throw new TypeError('You must pass an array to Promise.race().');\n    \n      return new Class(function(resolve, reject) {\n        for (var i = 0, promise; i < promises.length; i++)\n        {\n          promise = promises[i];\n    \n          if (promise && typeof promise.then === 'function')\n            promise.then(resolve, reject);\n          else\n            resolve(promise);\n        }\n      });\n    };\n    \n    Promise.resolve = function(value){\n      var Class = this;\n    \n      if (value && typeof value === 'object' && value.constructor === Class)\n        return value;\n    \n      return new Class(function(resolve){\n        resolve(value);\n      });\n    };\n    \n    Promise.reject = function(reason){\n      var Class = this;\n    \n      return new Class(function(resolve, reject){\n        reject(reason);\n      });\n    };\n    \n    })(new Function('return this')());\n    \n    /* brought from https://github.com/KyleAMathews/deepmerge and unwrapped from UMD */\n    function deepmerge(target, src) {\n        var array = Array.isArray(src);\n        var dst = array && [] || {};\n    \n        if (array) {\n            target = target || [];\n            dst = dst.concat(target);\n            src.forEach(function(e, i) {\n                if (typeof dst[i] === 'undefined') {\n                    dst[i] = e;\n                } else if (typeof e === 'object') {\n                    dst[i] = deepmerge(target[i], e);\n                } else {\n                    if (target.indexOf(e) === -1) {\n                        dst.push(e);\n                    }\n                }\n            });\n        } else {\n            if (target && typeof target === 'object') {\n                Object.keys(target).forEach(function (key) {\n                    dst[key] = target[key];\n                });\n            }\n            Object.keys(src).forEach(function (key) {\n                if (typeof src[key] !== 'object' || !src[key]) {\n                    dst[key] = src[key];\n                }\n                else {\n                    if (!target[key]) {\n                        dst[key] = src[key];\n                    } else {\n                        dst[key] = deepmerge(target[key], src[key]);\n                    }\n                }\n            });\n        }\n    \n        return dst;\n    }\n    \n    function safeGet(global, value) {\n        return value.split('.').reduce(function (obj, prop) {\n            return obj && obj[prop];\n        }, global);\n    }\n    \n    function isFunction(fn) {\n        return typeof fn === 'function';\n    }\n    \n    function defer() {\n        var result = {};\n        result.promise = new Promise(function(resolve, reject) {\n            result.resolve = resolve;\n            result.reject = reject;\n        });\n        return result;\n    }\n    function invokeLater(context, fn) {\n        lastTask = lastTask.then(function() {\n            pendingModule = context;\n            return fn();\n        }).then(cleanup, cleanup);\n        function cleanup() {\n            pendingModule = null;\n        }\n    }\n    \n    function loadDep(name, path) {\n        if(config.shim[name]) {\n            return loadByShim(name, path);\n        } else {\n            var deferred = defer();\n            deferred.name = name;\n            deferred.path = path;\n            invokeLater(deferred, function() {\n                return loadScript(name).catch(function() {\n                    deferred.reject(new Error('Error while loading module \"'+name+'\"'));\n                });\n            });\n            return deferred.promise;\n        }\n    }\n    function loadByShim(name, path) {\n        var shim = config.shim[name];\n        return _require(shim.deps || [], function() {\n            return loadScript(name).then(shim.exportsFn || function() {\n                return (shim.init && shim.init()) || safeGet(window, shim.exports);\n            });\n        }, null, path);\n    }\n    function loadScript(name) {\n        return new Promise(function(resolve, reject) {\n            var el = require.load(null, name, toUrl(name, true));\n            el.onerror = reject;\n            el.onload = resolve;\n        });\n    }\n    \n    function loadWithPlugin(dependency, path) {\n        var index = dependency.indexOf('!'),\n            plugin = dependency.substr(0, index);\n        dependency = dependency.substr(index+1);\n        return _require([plugin], function(plugin) {\n            return new Promise(function(resolve, reject) {\n                function localRequire() {\n                    if(!resolved) {\n                        return require.apply(null, arguments);\n                    }\n                }\n                Object.keys(require).forEach(function(key) {\n                    localRequire[key] = require[key];\n                });\n                var resolved = false;\n                resolve.error = reject;\n                resolve.fromText = function(name, text) {\n                    if(!text) {\n                        text = name;\n                    }\n                    var previousModule = pendingModule;\n                    pendingModule = {name: name, resolve: resolve, reject: reject, path: path};\n                    /* jshint -W054 */\n                    (new Function(text))();\n                    /* jshint +W054 */\n                    pendingModule = previousModule;\n                    resolved = true;\n                };\n                plugin.load(dependency, localRequire, resolve, config);\n            });\n        }, null, path);\n    }\n    \n    var commentRegExp = /(\\/\\*([\\s\\S]*?)\\*\\/|([^:]|^)\\/\\/(.*)$)/mg,\n        cjsRequireRegExp = /[^.]\\s*require\\s*\\(\\s*[\"']([^'\"\\s]+)[\"']\\s*\\)/g;\n    function wrapCommonJS(name, factory) {\n        var deps = [];\n        factory.toString()\n            .replace(commentRegExp, '')\n            .replace(cjsRequireRegExp, function (match, dep) {\n                deps.push(dep);\n            });\n        return {\n            deps: deps,\n            factory: function() {\n                var args = arguments,\n                    modules = deps.reduce(function(modules, name, index) {\n                    modules[name] = args[index];\n                    return modules;\n                }, {});\n                return factory(\n                    function localRequire(name) {\n                        if(!modules[name]) {\n                            throw new Error('Module \"' + deps + '\" has not been loaded yet');\n                        }\n                        return modules[name];\n                    },\n                    locals.module(name),\n                    locals.exports(name)\n                );\n            }\n        };\n    }\n    \n    \n    function _require(deps, factory, errback, path) {\n        var currentModule = path.slice(-1)[0];\n        return new Promise(function(resolve, reject) {\n            Promise.all(deps.map(function (dependency) {\n                if(path.indexOf(dependency) > -1) {\n                    return Promise.reject(new Error('Circular dependency: '+path.concat(dependency).join(' -> ')));\n                }\n                var newPath = path.concat(dependency);\n                if(locals[dependency]) {\n                    return locals[dependency](currentModule);\n                }\n                if(dependency.indexOf('!') > -1) {\n                    modules[dependency] = loadWithPlugin(dependency, newPath);\n                }\n                if(predefines[dependency]) {\n                    modules[dependency] = Promise.resolve().then(function() {\n                        return _require.apply(null, predefines[dependency].concat([newPath]));\n                    });\n                }\n                else if (!modules[dependency]) {\n                    modules[dependency] = loadDep(dependency, newPath);\n                }\n                return modules[dependency];\n            })).then(resolve, reject);\n        }).then(function (instances) {\n            if(isFunction(factory)) {\n                var result = factory.apply(null, instances);\n                return currentModule && safeGet(modules[currentModule], 'module.exports') || result;\n            } else {\n                return factory;\n            }\n        }, function(reason) {\n            if(isFunction(errback)) {\n                errback(reason);\n            }\n            require.onError(reason);\n            return Promise.reject(reason);\n        });\n    }\n    \n    function require(deps, factory, errback) {\n        return _require(deps, factory, errback, []);\n    }\n    var modules, predefines, config, lastTask, pendingModule,\n        locals = {\n            require: function(moduleName) {\n                return require;\n            },\n            module: function(moduleName) {\n                var module = modules[moduleName];\n                if(!module) {\n                    throw new Error('Module \"module\" should be required only by modules');\n                }\n                return (module.module = module.module || {\n                    id: moduleName,\n                    config: function () {\n                        return config.config[moduleName] || {};\n                    }\n                });\n            },\n            exports: function(moduleName) {\n                return (locals.module(moduleName).exports = {});\n            }\n        };\n    require.resetContext = function() {\n        config = {\n            urlArgs: '',\n            baseUrl: './',\n            paths: {},\n            shim: {},\n            bundles: {},\n            config: {}\n        };\n        modules = {};\n        predefines = {};\n        lastTask = Promise.resolve();\n        pendingModule = null;\n    };\n    require.config = function(options) {\n        config = deepmerge(config, options);\n    };\n    require.load = function (context, name, url) {\n        var el = document.createElement(\"script\");\n        el.src = url;\n        el.async = true;\n        document.getElementsByTagName('body')[0].appendChild(el);\n        return el;\n    };\n    \n    function toUrl(name, appendJS) {\n        var bundle = Object.keys(config.bundles).filter(function(bundle) {\n            return config.bundles[bundle].indexOf(name) > -1;\n        })[0];\n        if(bundle) {\n            return require.toUrl(bundle);\n        }\n        if(config.paths[name]) {\n            name = config.paths[name];\n        }\n        if(!/^([\\w\\+\\.\\-]+:)?\\//.test(name)) {\n            name = config.baseUrl + name;\n        }\n        if(appendJS) {\n            name += '.js';\n        }\n        if(config.urlArgs) {\n            name += '?'+config.urlArgs;\n        }\n        return name;\n    }\n    \n    require.toUrl = function(name) {\n        return toUrl(name, false);\n    };\n    require.specified = function(name) {\n        return modules.hasOwnProperty(name);\n    };\n    require.onError = function(reason) {\n        console.error(reason);\n    };\n    \n    require.resetContext();\n    \n    function define(name, deps, factory) {\n        if(typeof name !== 'string') {\n            factory = deps;\n            deps = name;\n            name = null;\n        }\n        if(!Array.isArray(deps)) {\n            factory = deps;\n            deps = [];\n        }\n        var deferred = pendingModule;\n        if(name === null && !deferred) {\n            throw new Error('Unexpected define!');\n        }\n    \n        if(deps.length === 0 && factory.length > 0) {\n            var wrapped = wrapCommonJS(name || deferred.name, factory);\n            deps = wrapped.deps;\n            factory = wrapped.factory;\n        }\n    \n        if (name === null || deferred && deferred.name === name) {\n            var module = _require(deps, factory, deferred.reject, deferred.path);\n            deferred.resolve(module);\n        } else {\n            predefines[name] = [deps, factory, null];\n        }\n    }\n    define.amd = {};\n    \n\n    global.define = define;\n    global.require = require;\n    global.requirejs = require;\n})(window);\n"]}