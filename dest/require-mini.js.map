{"version":3,"sources":["require-mini.js"],"names":["global","deepmerge","target","src","array","Array","isArray","dst","concat","forEach","e","i","indexOf","push","Object","keys","key","safeGet","value","split","reduce","obj","prop","isFunction","fn","defer","result","promise","Promise","resolve","reject","invokeLater","context","cleanup","pendingModule","lastTask","then","loadDep","name","path","config","shim","loadByShim","deferred","loadScript","Error","_require","deps","exportsFn","init","window","exports","el","require","load","toUrl","onerror","onload","loadWithPlugin","dependency","index","plugin","substr","localRequire","resolved","apply","arguments","error","fromText","text","previousModule","Function","wrapCommonJS","factory","replace","commentRegExp","cjsRequireRegExp","match","dep","args","modules","locals","module","errback","currentModule","slice","all","map","join","newPath","predefines","instances","reason","onError","appendJS","bundle","bundles","filter","paths","test","baseUrl","urlArgs","define","length","wrapped","asyncFlush","asyncQueue","asyncTimer","asyncCall","callback","arg","asyncSetTimer","invokeResolver","resolver","resolvePromise","rejectPromise","invokeCallback","subscriber","owner","settled","state_","data_","FULFILLED","handleThenable","REJECTED","TypeError","call","val","fulfill","PENDING","SEALED","publishFulfillment","publishRejection","publish","then_","this","NativePromise","nativePromiseSupported","r","NOOP","setImmediate","setTimeout","prototype","constructor","undefined","onFulfillment","onRejection","fulfilled","rejected","catch","promises","Class","remaining","results","race","moduleName","id","resetContext","options","url","document","createElement","async","getElementsByTagName","appendChild","specified","hasOwnProperty","console","amd","requirejs"],"mappings":"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","file":"require-mini.js","sourcesContent":["(function(global) {\n    (function(global){\n    \n    //\n    // Check for native Promise and it has correct interface\n    //\n    \n    var NativePromise = global['Promise'];\n    var nativePromiseSupported =\n      NativePromise &&\n      // Some of these methods are missing from\n      // Firefox/Chrome experimental implementations\n      'resolve' in NativePromise &&\n      'reject' in NativePromise &&\n      'all' in NativePromise &&\n      'race' in NativePromise &&\n      // Older version of the spec had a resolver object\n      // as the arg rather than a function\n      (function(){\n        var resolve;\n        new NativePromise(function(r){ resolve = r; });\n        return typeof resolve === 'function';\n      })();\n    \n    \n    //\n    // export if necessary\n    //\n    \n    if (typeof exports !== 'undefined' && exports)\n    {\n      // node.js\n      exports.Promise = nativePromiseSupported ? NativePromise : Promise;\n    }\n    else\n    {\n      // in browser add to global\n      if (!nativePromiseSupported)\n        global['Promise'] = Promise;\n    }\n    \n    \n    //\n    // Polyfill\n    //\n    \n    var PENDING = 'pending';\n    var SEALED = 'sealed';\n    var FULFILLED = 'fulfilled';\n    var REJECTED = 'rejected';\n    var NOOP = function(){};\n    \n    // async calls\n    var asyncSetTimer = typeof setImmediate !== 'undefined' ? setImmediate : setTimeout;\n    var asyncQueue = [];\n    var asyncTimer;\n    \n    function asyncFlush(){\n      // run promise callbacks\n      for (var i = 0; i < asyncQueue.length; i++)\n        asyncQueue[i][0](asyncQueue[i][1]);\n    \n      // reset async asyncQueue\n      asyncQueue = [];\n      asyncTimer = false;\n    }\n    \n    function asyncCall(callback, arg){\n      asyncQueue.push([callback, arg]);\n    \n      if (!asyncTimer)\n      {\n        asyncTimer = true;\n        asyncSetTimer(asyncFlush, 0);\n      }\n    }\n    \n    \n    function invokeResolver(resolver, promise) {\n      function resolvePromise(value) {\n        resolve(promise, value);\n      }\n    \n      function rejectPromise(reason) {\n        reject(promise, reason);\n      }\n    \n      try {\n        resolver(resolvePromise, rejectPromise);\n      } catch(e) {\n        rejectPromise(e);\n      }\n    }\n    \n    function invokeCallback(subscriber){\n      var owner = subscriber.owner;\n      var settled = owner.state_;\n      var value = owner.data_;  \n      var callback = subscriber[settled];\n      var promise = subscriber.then;\n    \n      if (typeof callback === 'function')\n      {\n        settled = FULFILLED;\n        try {\n          value = callback(value);\n        } catch(e) {\n          reject(promise, e);\n        }\n      }\n    \n      if (!handleThenable(promise, value))\n      {\n        if (settled === FULFILLED)\n          resolve(promise, value);\n    \n        if (settled === REJECTED)\n          reject(promise, value);\n      }\n    }\n    \n    function handleThenable(promise, value) {\n      var resolved;\n    \n      try {\n        if (promise === value)\n          throw new TypeError('A promises callback cannot return that same promise.');\n    \n        if (value && (typeof value === 'function' || typeof value === 'object'))\n        {\n          var then = value.then;  // then should be retrived only once\n    \n          if (typeof then === 'function')\n          {\n            then.call(value, function(val){\n              if (!resolved)\n              {\n                resolved = true;\n    \n                if (value !== val)\n                  resolve(promise, val);\n                else\n                  fulfill(promise, val);\n              }\n            }, function(reason){\n              if (!resolved)\n              {\n                resolved = true;\n    \n                reject(promise, reason);\n              }\n            });\n    \n            return true;\n          }\n        }\n      } catch (e) {\n        if (!resolved)\n          reject(promise, e);\n    \n        return true;\n      }\n    \n      return false;\n    }\n    \n    function resolve(promise, value){\n      if (promise === value || !handleThenable(promise, value))\n        fulfill(promise, value);\n    }\n    \n    function fulfill(promise, value){\n      if (promise.state_ === PENDING)\n      {\n        promise.state_ = SEALED;\n        promise.data_ = value;\n    \n        asyncCall(publishFulfillment, promise);\n      }\n    }\n    \n    function reject(promise, reason){\n      if (promise.state_ === PENDING)\n      {\n        promise.state_ = SEALED;\n        promise.data_ = reason;\n    \n        asyncCall(publishRejection, promise);\n      }\n    }\n    \n    function publish(promise) {\n      promise.then_ = promise.then_.forEach(invokeCallback);\n    }\n    \n    function publishFulfillment(promise){\n      promise.state_ = FULFILLED;\n      publish(promise);\n    }\n    \n    function publishRejection(promise){\n      promise.state_ = REJECTED;\n      publish(promise);\n    }\n    \n    /**\n    * @class\n    */\n    function Promise(resolver){\n      if (typeof resolver !== 'function')\n        throw new TypeError('Promise constructor takes a function argument');\n    \n      if (this instanceof Promise === false)\n        throw new TypeError('Failed to construct \\'Promise\\': Please use the \\'new\\' operator, this object constructor cannot be called as a function.');\n    \n      this.then_ = [];\n    \n      invokeResolver(resolver, this);\n    }\n    \n    Promise.prototype = {\n      constructor: Promise,\n    \n      state_: PENDING,\n      then_: null,\n      data_: undefined,\n    \n      then: function(onFulfillment, onRejection){\n        var subscriber = {\n          owner: this,\n          then: new this.constructor(NOOP),\n          fulfilled: onFulfillment,\n          rejected: onRejection\n        };\n    \n        if (this.state_ === FULFILLED || this.state_ === REJECTED)\n        {\n          // already resolved, call callback async\n          asyncCall(invokeCallback, subscriber);\n        }\n        else\n        {\n          // subscribe\n          this.then_.push(subscriber);\n        }\n    \n        return subscriber.then;\n      },\n    \n      'catch': function(onRejection) {\n        return this.then(null, onRejection);\n      }\n    };\n    \n    Promise.all = function(promises){\n      var Class = this;\n    \n      if (!Array.isArray(promises))\n        throw new TypeError('You must pass an array to Promise.all().');\n    \n      return new Class(function(resolve, reject){\n        var results = [];\n        var remaining = 0;\n    \n        function resolver(index){\n          remaining++;\n          return function(value){\n            results[index] = value;\n            if (!--remaining)\n              resolve(results);\n          };\n        }\n    \n        for (var i = 0, promise; i < promises.length; i++)\n        {\n          promise = promises[i];\n    \n          if (promise && typeof promise.then === 'function')\n            promise.then(resolver(i), reject);\n          else\n            results[i] = promise;\n        }\n    \n        if (!remaining)\n          resolve(results);\n      });\n    };\n    \n    Promise.race = function(promises){\n      var Class = this;\n    \n      if (!Array.isArray(promises))\n        throw new TypeError('You must pass an array to Promise.race().');\n    \n      return new Class(function(resolve, reject) {\n        for (var i = 0, promise; i < promises.length; i++)\n        {\n          promise = promises[i];\n    \n          if (promise && typeof promise.then === 'function')\n            promise.then(resolve, reject);\n          else\n            resolve(promise);\n        }\n      });\n    };\n    \n    Promise.resolve = function(value){\n      var Class = this;\n    \n      if (value && typeof value === 'object' && value.constructor === Class)\n        return value;\n    \n      return new Class(function(resolve){\n        resolve(value);\n      });\n    };\n    \n    Promise.reject = function(reason){\n      var Class = this;\n    \n      return new Class(function(resolve, reject){\n        reject(reason);\n      });\n    };\n    \n    })(new Function('return this')());\n    \n\n    /* brought from https://github.com/KyleAMathews/deepmerge and unwrapped from UMD */\n    function deepmerge(target, src) {\n        var array = Array.isArray(src);\n        var dst = array && [] || {};\n    \n        if (array) {\n            target = target || [];\n            dst = dst.concat(target);\n            src.forEach(function(e, i) {\n                if (typeof dst[i] === 'undefined') {\n                    dst[i] = e;\n                } else if (typeof e === 'object') {\n                    dst[i] = deepmerge(target[i], e);\n                } else {\n                    if (target.indexOf(e) === -1) {\n                        dst.push(e);\n                    }\n                }\n            });\n        } else {\n            if (target && typeof target === 'object') {\n                Object.keys(target).forEach(function (key) {\n                    dst[key] = target[key];\n                });\n            }\n            Object.keys(src).forEach(function (key) {\n                if (typeof src[key] !== 'object' || !src[key]) {\n                    dst[key] = src[key];\n                }\n                else {\n                    if (!target[key]) {\n                        dst[key] = src[key];\n                    } else {\n                        dst[key] = deepmerge(target[key], src[key]);\n                    }\n                }\n            });\n        }\n    \n        return dst;\n    }\n    \n\n    function safeGet(global, value) {\n        return value.split('.').reduce(function (obj, prop) {\n            return obj && obj[prop];\n        }, global);\n    }\n    \n    function isFunction(fn) {\n        return typeof fn === 'function';\n    }\n    \n    function defer() {\n        var result = {};\n        result.promise = new Promise(function(resolve, reject) {\n            result.resolve = resolve;\n            result.reject = reject;\n        });\n        return result;\n    }\n    function invokeLater(context, fn) {\n        lastTask = lastTask.then(function() {\n            pendingModule = context;\n            return fn();\n        }).then(cleanup, cleanup);\n        function cleanup() {\n            pendingModule = null;\n        }\n    }\n    \n    function loadDep(name, path) {\n        if(config.shim[name]) {\n            return loadByShim(name, path);\n        } else {\n            var deferred = defer();\n            deferred.name = name;\n            deferred.path = path;\n            invokeLater(deferred, function() {\n                return loadScript(name).catch(function() {\n                    deferred.reject(new Error('Error while loading module \"'+name+'\"'));\n                });\n            });\n            return deferred.promise;\n        }\n    }\n    function loadByShim(name, path) {\n        var shim = config.shim[name];\n        return _require(shim.deps || [], function() {\n            return loadScript(name).then(shim.exportsFn || function() {\n                return (shim.init && shim.init()) || safeGet(window, shim.exports);\n            });\n        }, null, path);\n    }\n    function loadScript(name) {\n        return new Promise(function(resolve, reject) {\n            var el = require.load(null, name, toUrl(name, true));\n            el.onerror = reject;\n            el.onload = resolve;\n        });\n    }\n    \n    function loadWithPlugin(dependency, path) {\n        var index = dependency.indexOf('!'),\n            plugin = dependency.substr(0, index);\n        dependency = dependency.substr(index+1);\n        return _require([plugin], function(plugin) {\n            return new Promise(function(resolve, reject) {\n                function localRequire() {\n                    if(!resolved) {\n                        return require.apply(null, arguments);\n                    }\n                }\n                Object.keys(require).forEach(function(key) {\n                    localRequire[key] = require[key];\n                });\n                var resolved = false;\n                resolve.error = reject;\n                resolve.fromText = function(name, text) {\n                    if(!text) {\n                        text = name;\n                    }\n                    var previousModule = pendingModule;\n                    pendingModule = {name: name, resolve: resolve, reject: reject, path: path};\n                    /* jshint -W054 */\n                    (new Function(text))();\n                    /* jshint +W054 */\n                    pendingModule = previousModule;\n                    resolved = true;\n                };\n                plugin.load(dependency, localRequire, resolve, config);\n            });\n        }, null, path);\n    }\n    \n    var commentRegExp = /(\\/\\*([\\s\\S]*?)\\*\\/|([^:]|^)\\/\\/(.*)$)/mg,\n        cjsRequireRegExp = /[^.]\\s*require\\s*\\(\\s*[\"']([^'\"\\s]+)[\"']\\s*\\)/g;\n    function wrapCommonJS(name, factory) {\n        var deps = [];\n        factory.toString()\n            .replace(commentRegExp, '')\n            .replace(cjsRequireRegExp, function (match, dep) {\n                deps.push(dep);\n            });\n        return {\n            deps: deps,\n            factory: function() {\n                var args = arguments,\n                    modules = deps.reduce(function(modules, name, index) {\n                    modules[name] = args[index];\n                    return modules;\n                }, {});\n                return factory(\n                    function localRequire(name) {\n                        if(!modules[name]) {\n                            throw new Error('Module \"' + deps + '\" has not been loaded yet');\n                        }\n                        return modules[name];\n                    },\n                    locals.module(name),\n                    locals.exports(name)\n                );\n            }\n        };\n    }\n    \n    \n    function _require(deps, factory, errback, path) {\n        var currentModule = path.slice(-1)[0];\n        return new Promise(function(resolve, reject) {\n            Promise.all(deps.map(function (dependency) {\n                if(path.indexOf(dependency) > -1) {\n                    return Promise.reject(new Error('Circular dependency: '+path.concat(dependency).join(' -> ')));\n                }\n                var newPath = path.concat(dependency);\n                if(locals[dependency]) {\n                    return locals[dependency](currentModule);\n                }\n                if(dependency.indexOf('!') > -1) {\n                    modules[dependency] = loadWithPlugin(dependency, newPath);\n                }\n                if(predefines[dependency]) {\n                    modules[dependency] = Promise.resolve().then(function() {\n                        return _require.apply(null, predefines[dependency].concat([newPath]));\n                    });\n                }\n                else if (!modules[dependency]) {\n                    modules[dependency] = loadDep(dependency, newPath);\n                }\n                return modules[dependency];\n            })).then(resolve, reject);\n        }).then(function (instances) {\n            if(isFunction(factory)) {\n                var result = factory.apply(null, instances);\n                return currentModule && safeGet(modules[currentModule], 'module.exports') || result;\n            } else {\n                return factory;\n            }\n        }, function(reason) {\n            if(isFunction(errback)) {\n                errback(reason);\n            }\n            require.onError(reason);\n            return Promise.reject(reason);\n        });\n    }\n    \n    function require(deps, factory, errback) {\n        return _require(deps, factory, errback, []);\n    }\n    var modules, predefines, config, lastTask, pendingModule,\n        locals = {\n            require: function(moduleName) {\n                return require;\n            },\n            module: function(moduleName) {\n                var module = modules[moduleName];\n                if(!module) {\n                    throw new Error('Module \"module\" should be required only by modules');\n                }\n                return (module.module = module.module || {\n                    id: moduleName,\n                    config: function () {\n                        return config.config[moduleName] || {};\n                    }\n                });\n            },\n            exports: function(moduleName) {\n                return (locals.module(moduleName).exports = {});\n            }\n        };\n    require.resetContext = function() {\n        config = {\n            urlArgs: '',\n            baseUrl: './',\n            paths: {},\n            shim: {},\n            bundles: {},\n            config: {}\n        };\n        modules = {};\n        predefines = {};\n        lastTask = Promise.resolve();\n        pendingModule = null;\n    };\n    require.config = function(options) {\n        config = deepmerge(config, options);\n    };\n    require.load = function (context, name, url) {\n        var el = document.createElement(\"script\");\n        el.src = url;\n        el.async = true;\n        document.getElementsByTagName('body')[0].appendChild(el);\n        return el;\n    };\n    \n    function toUrl(name, appendJS) {\n        var bundle = Object.keys(config.bundles).filter(function(bundle) {\n            return config.bundles[bundle].indexOf(name) > -1;\n        })[0];\n        if(bundle) {\n            return require.toUrl(bundle);\n        }\n        if(config.paths[name]) {\n            name = config.paths[name];\n        }\n        if(!/^([\\w\\+\\.\\-]+:)?\\//.test(name)) {\n            name = config.baseUrl + name;\n        }\n        if(appendJS) {\n            name += '.js';\n        }\n        if(config.urlArgs) {\n            name += '?'+config.urlArgs;\n        }\n        return name;\n    }\n    \n    require.toUrl = function(name) {\n        return toUrl(name, false);\n    };\n    require.specified = function(name) {\n        return modules.hasOwnProperty(name);\n    };\n    require.onError = function(reason) {\n        console.error(reason);\n    };\n    \n    require.resetContext();\n    \n    function define(name, deps, factory) {\n        if(typeof name !== 'string') {\n            factory = deps;\n            deps = name;\n            name = null;\n        }\n        if(!Array.isArray(deps)) {\n            factory = deps;\n            deps = [];\n        }\n        var deferred = pendingModule;\n        if(name === null && !deferred) {\n            throw new Error('Unexpected define!');\n        }\n    \n        if(deps.length === 0 && factory.length > 0) {\n            var wrapped = wrapCommonJS(name || deferred.name, factory);\n            deps = wrapped.deps;\n            factory = wrapped.factory;\n        }\n    \n        if (name === null || deferred && deferred.name === name) {\n            var module = _require(deps, factory, deferred.reject, deferred.path);\n            deferred.resolve(module);\n        } else {\n            predefines[name] = [deps, factory, null];\n        }\n    }\n    define.amd = {};\n    \n\n\n    global.define = define;\n    global.require = require;\n    global.requirejs = require;\n})(window);\n"]}